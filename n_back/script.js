// Define study
const study = lab.util.fromObject({
  title: "root",
  type: "lab.flow.Sequence",
  plugins: [
    {
      type: "lab.plugins.Metadata",
      path: undefined,
    },
    {
      type: "lab.plugins.Transmit",
      url: "backend.php",
      path: undefined,
    },
  ],
  metadata: {
    title: "N-back task",
    description:
      "This study implements an N-back short-term memory task. Starting with a task that concerns only the visible stimulus (0-back), the task increases in complexity until it requires remembering the stimulus shown three letters back (3-back).\n\nThe task is modelled after Study 1 in the following article, though the stimuli have been exchanged for letters:\n\nBraver, T. S., Cohen, J. D., Nystrom, L. E., Jonides, J., Smith, E. E., & Noll, D. C. (1997). A parametric study of prefrontal cortex involvement in human working memory. Neuroimage, 5(1), 49-62.",
    repository:
      "https:\u002F\u002Fgithub.com\u002FFelixHenninger\u002Flab.js\u002Ftree\u002Fmaster\u002Fexamples\u002FN-back Task",
    contributors: "Felix Ludwig",
  },
  parameters: {},
  files: {},
  messageHandlers: {},
  responses: {},
  content: [
    {
      type: "lab.html.Screen",
      responses: {
        "keypress(Space)": "Continue",
      },
      messageHandlers: {},
      title: "Instructions",
      content:
        "\u003Cheader\u003E\r\n  \u003Ch2\u003EYour task\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class=\"content-vertical-center content-horizontal-center\"\u003E\r\n  \u003Cdiv class=\"w-m text-justify\"\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EIn the following, we're going to show you sequences of letters.\u003C\u002Fstrong\u003E We'll present the letters one at a time, in the center of your screen.\u003C\u002Fp\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EYour task will be to judge whether or not each letter matches a set of conditions.\u003C\u002Fstrong\u003E We'll  will have its own set of conditions which will be explained before the round starts. If the appearing letter meets the conditions, we'd ask you to press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E. If not, press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\u003C\u002Fp\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EThe letters will be either lower or upper case.\u003C\u002Fstrong\u003E This, however, doesn't matter for the task. You should ignore the case, and respond the same regardless of the case: The letters \u003Cstrong\u003Et\u003C\u002Fstrong\u003E and \u003Cstrong\u003ET\u003C\u002Fstrong\u003E are, for our purposes, treated as the same. On the next screen, we'll explain the rules for round one.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003ESpace\u003C\u002Fkbd\u003E to continue.\r\n\u003C\u002Ffooter\u003E",
      parameters: {},
      files: {},
    },
    {
      type: "lab.flow.Sequence",
      responses: {
        "": "",
      },
      messageHandlers: {},
      title: "0-back",
      parameters: {},
      files: {},
      content: [
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(j)": "Continue",
            "keypress(k)": "Continue",
          },
          messageHandlers: {},
          title: "Introduction",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 1\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m text-justify"\u003E\r\n    \u003Cp\u003EWe will now begin with the first set of letters. In this set, please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E when the visible letter is a \u003Cstrong\u003EB\u003C\u002Fstrong\u003E or \u003Cstrong\u003Eb\u003C\u002Fstrong\u003E. Remember that the case of the letter may change. Press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E for any other letter that appears.\u003C\u002Fp\u003E\r\n    \u003Cp\u003EPlease now place one hand on the keyboard and press one of the buttons mentioned below to start.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E or \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E to begin.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
        {
          type: "lab.flow.Loop",
          templateParameters: [
            {
              condition: "0_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "B",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "v",
              category: 3,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "B",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "0_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "0_back",
              stimulus: "B",
              category: 2,
              match: true,
            },
          ],
          responses: {
            "": "",
          },
          messageHandlers: {},
          title: "0-back loop",
          parameters: {},
          files: {},
          sample: {
            mode: "sequential",
          },
          shuffleGroups: [],
          template: {
            type: "lab.flow.Sequence",
            responses: {
              "": "",
            },
            messageHandlers: {},
            title: "Sequence",
            parameters: {},
            files: {},
            content: [
              {
                type: "lab.html.Screen",
                responses: {},
                messageHandlers: {},
                title: "Inter-stimulus interval",
                timeout: "500",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 1\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter is a \u003Cstrong\u003EB\u003C\u002Fstrong\u003E or a \u003Cstrong\u003Eb\u003C\u002Fstrong\u003E. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                parameters: {},
                files: {},
              },
              {
                type: "lab.html.Screen",
                responses: {
                  "keypress(j)": "true",
                  "keypress(k)": "false",
                },
                messageHandlers: {},
                title: "Stimulus",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 1\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="stimulus"\u003E\r\n    ${ parameters.stimulus }\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter is a \u003Cstrong\u003EB\u003C\u002Fstrong\u003E or a \u003Cstrong\u003Eb\u003C\u002Fstrong\u003E. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                timeout: "2500",
                correctResponse: "${ parameters.match }",
                parameters: {},
                files: {},
              },
            ],
          },
        },
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(Space)": "Continue",
          },
          messageHandlers: {},
          title: "End",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 1\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m"\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EYou have completed the first set. Well done!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\r\n    \u003Cp\u003EYou\'re welcome to take a brief break if you like.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003ESpace\u003C\u002Fkbd\u003E when you\'re ready to proceed to the second set.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
      ],
    },
    {
      type: "lab.flow.Sequence",
      responses: {
        "": "",
      },
      messageHandlers: {},
      title: "1-back",
      parameters: {},
      files: {},
      content: [
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(j)": "Continue",
            "keypress(k)": "Continue",
          },
          messageHandlers: {},
          title: "Introduction",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 2\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m text-justify"\u003E\r\n    \u003Cp\u003EWe will now proceed with the second sequence of letters. For this set, please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E \u003Cem\u003Ewhen the current letter matches the letter before\u003C\u002Fem\u003E, that is, when the same letter is shown twice in a row. Remember that the case of the letter is irrelevant. Press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E if the letter is not the same as the last.\u003C\u002Fp\u003E\r\n\r\n    \u003Cp\u003EFor instance, if you saw the sequence \u003Cstrong\u003Eg\u003C\u002Fstrong\u003E...\u003Cstrong\u003EG\u003C\u002Fstrong\u003E...\u003Cstrong\u003Ev\u003C\u002Fstrong\u003E...\u003Cstrong\u003ET\u003C\u002Fstrong\u003E...\u003Cstrong\u003Et\u003C\u002Fstrong\u003E...\u003Cstrong\u003EV\u003C\u002Fstrong\u003E...\u003Cstrong\u003Eb\u003C\u002Fstrong\u003E, you would press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E on the second \u003Cstrong\u003Eg\u003C\u002Fstrong\u003E and the second \u003Cstrong\u003Et\u003C\u002Fstrong\u003E (because they the same letter as the one immediately before) and \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E for every other letter.\u003C\u002Fp\u003E\r\n\r\n    \u003Cp\u003EPlease now place one hand on the keyboard and press one of the buttons mentioned below to start.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E or \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E to begin.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
        {
          type: "lab.flow.Loop",
          templateParameters: [
            {
              condition: "1_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "t",
              category: 1,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "T",
              category: 1,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "t",
              category: 1,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "G",
              category: 4,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "V",
              category: 3,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "v",
              category: 3,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
            {
              condition: "1_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "1_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
          ],
          responses: {
            "": "",
          },
          messageHandlers: {},
          title: "1-back loop",
          parameters: {},
          files: {},
          sample: {
            mode: "sequential",
          },
          shuffleGroups: [],
          template: {
            type: "lab.flow.Sequence",
            responses: {
              "": "",
            },
            messageHandlers: {},
            title: "Sequence",
            parameters: {},
            files: {},
            content: [
              {
                type: "lab.html.Screen",
                responses: {},
                messageHandlers: {},
                title: "Inter-stimulus interval",
                timeout: "500",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 2\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Edirectly\u003C\u002Fstrong\u003E before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                parameters: {},
                files: {},
              },
              {
                type: "lab.html.Screen",
                responses: {
                  "keypress(j)": "true",
                  "keypress(k)": "false",
                },
                messageHandlers: {},
                title: "Stimulus",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 2\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="stimulus"\u003E\r\n    ${ parameters.stimulus }\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Edirectly\u003C\u002Fstrong\u003E before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                timeout: "2500",
                correctResponse: "${ parameters.match }",
                parameters: {},
                files: {},
              },
            ],
          },
        },
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(Space)": "Continue",
          },
          messageHandlers: {},
          title: "End",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 2\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m"\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EYou have completed the second set. Well done!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\r\n    \u003Cp\u003EYou\'re welcome to take a brief break if you like.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003ESpace\u003C\u002Fkbd\u003E when you\'re ready to proceed to the second set.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
      ],
    },
    {
      type: "lab.flow.Sequence",
      responses: {
        "": "",
      },
      messageHandlers: {},
      title: "2-back",
      parameters: {},
      files: {},
      content: [
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(j)": "Continue",
            "keypress(k)": "Continue",
          },
          messageHandlers: {},
          title: "Introduction",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 3\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m text-justify"\u003E\r\n    \u003Cp\u003EWe will now proceed with the third sequence of letters. In this set, please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E \u003Cem\u003Ewhen the current letter matches the letter before last\u003C\u002Fem\u003E, that is, when the letter shown is the same as two letters back. Remember that the case of the letter is irrelevant. Press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E if the letter shown is not the same as the one two letters back.\u003C\u002Fp\u003E\r\n    \u003Cp\u003EFor instance, if you saw the sequence: \u003Cstrong\u003Ev\u003C\u002Fstrong\u003E...\u003Cstrong\u003EG\u003C\u002Fstrong\u003E...\u003Cstrong\u003EV\u003C\u002Fstrong\u003E...\u003Cstrong\u003ET\u003C\u002Fstrong\u003E...\u003Cstrong\u003EB\u003C\u002Fstrong\u003E...\u003Cstrong\u003EV\u003C\u002Fstrong\u003E...\u003Cstrong\u003Eb\u003C\u002Fstrong\u003E, you would press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E on the second \u003Cstrong\u003Ev\u003C\u002Fstrong\u003E and the second \u003Cstrong\u003Eb\u003C\u002Fstrong\u003E and \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E for every other letter.\u003C\u002Fp\u003E\r\n    \u003Cp\u003EPlease now place one hand on the keyboard and press one of the buttons mentioned below to start.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E or \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E to proceed.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
        {
          type: "lab.flow.Loop",
          templateParameters: [
            {
              condition: "2_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "v",
              category: 3,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "b",
              category: 2,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "t",
              category: 1,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "T",
              category: 1,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "T",
              category: 1,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "B",
              category: 2,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "G",
              category: 4,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "T",
              category: 1,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "g",
              category: 4,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "2_back",
              stimulus: "G",
              category: 4,
              match: true,
            },
            {
              condition: "2_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
          ],
          responses: {
            "": "",
          },
          messageHandlers: {},
          title: "2-back loop",
          parameters: {},
          files: {},
          sample: {
            mode: "sequential",
          },
          shuffleGroups: [],
          template: {
            type: "lab.flow.Sequence",
            responses: {
              "": "",
            },
            messageHandlers: {},
            title: "Sequence",
            parameters: {},
            files: {},
            content: [
              {
                type: "lab.html.Screen",
                responses: {},
                messageHandlers: {},
                title: "Inter-stimulus interval",
                timeout: "500",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 3\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Etwo\u003C\u002Fstrong\u003E trials before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                parameters: {},
                files: {},
              },
              {
                type: "lab.html.Screen",
                responses: {
                  "keypress(j)": "true",
                  "keypress(k)": "false",
                },
                messageHandlers: {},
                title: "Stimulus",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 3\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="stimulus"\u003E\r\n    ${ parameters.stimulus }\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Etwo\u003C\u002Fstrong\u003E trials before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                timeout: "2500",
                correctResponse: "${ parameters.match }",
                parameters: {},
                files: {},
              },
            ],
          },
        },
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(Space)": "Continue",
          },
          messageHandlers: {},
          title: "End",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 3\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m"\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EYou have completed the third set. Well done!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\r\n    \u003Cp\u003EYou\'re welcome to take a brief break if you like.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003ESpace\u003C\u002Fkbd\u003E when you\'re ready to proceed to the second set.\r\n\u003C\u002Ffooter\u003E\r\n',
          parameters: {},
          files: {},
        },
      ],
    },
    {
      type: "lab.flow.Sequence",
      responses: {
        "": "",
      },
      messageHandlers: {},
      title: "3-back",
      parameters: {},
      files: {},
      content: [
        {
          type: "lab.html.Screen",
          responses: {
            "keypress(j)": "Continue",
            "keypress(k)": "Continue",
          },
          messageHandlers: {},
          title: "Introduction",
          content:
            '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 4\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m text-justify"\u003E\r\n    \u003Cp\u003EWe will now proceed with the fourth and last sequence. In this round, please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E \u003Cem\u003Ewhen the current letter matches the letter \u003Cstrong\u003Ethree\u003C\u002Fstrong\u003E trials before\u003C\u002Fem\u003E. Remember that the case of the letter is irrelevant. Press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E if the letter shown is not the same as three letters back.\u003C\u002Fp\u003E\r\n    \u003Cp\u003EFor instance, if you saw the sequence: \u003Cstrong\u003Et\u003C\u002Fstrong\u003E...\u003Cstrong\u003EG\u003C\u002Fstrong\u003E...\u003Cstrong\u003EV\u003C\u002Fstrong\u003E...\u003Cstrong\u003ET\u003C\u002Fstrong\u003E...\u003Cstrong\u003EB\u003C\u002Fstrong\u003E...\u003Cstrong\u003EV\u003C\u002Fstrong\u003E...\u003Cstrong\u003Eb\u003C\u002Fstrong\u003E, you would press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E on the second "t" and the second "v" and \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E for every other letter.\u003C\u002Fp\u003E\r\n    \u003Cp\u003EPlease now place one hand on the keyboard and press one of the buttons mentioned below to start.\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Please press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E or \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E to continue.\r\n\u003C\u002Ffooter\u003E',
          parameters: {},
          files: {},
        },
        {
          type: "lab.flow.Loop",
          templateParameters: [
            {
              condition: "3_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "B",
              category: 2,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "t",
              category: 1,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "T",
              category: 1,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "G",
              category: 4,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "v",
              category: 3,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "V",
              category: 3,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "t",
              category: 1,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "b",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "V",
              category: 3,
              match: true,
            },
            {
              condition: "3_back",
              stimulus: "V",
              category: 3,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "g",
              category: 4,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "B",
              category: 2,
              match: false,
            },
            {
              condition: "3_back",
              stimulus: "v",
              category: 3,
              match: true,
            },
          ],
          responses: {
            "": "",
          },
          messageHandlers: {},
          title: "3-back loop",
          parameters: {},
          files: {},
          sample: {
            mode: "sequential",
          },
          shuffleGroups: [],
          template: {
            type: "lab.flow.Sequence",
            responses: {
              "": "",
            },
            messageHandlers: {},
            title: "Sequence",
            parameters: {},
            files: {},
            content: [
              {
                type: "lab.html.Screen",
                responses: {},
                messageHandlers: {},
                title: "Inter-stimulus interval",
                timeout: "500",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 4\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Ethree\u003C\u002Fstrong\u003E trials before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                parameters: {},
                files: {},
              },
              {
                type: "lab.html.Screen",
                responses: {
                  "keypress(j)": "true",
                  "keypress(k)": "false",
                },
                messageHandlers: {},
                title: "Stimulus",
                content:
                  '\u003Cheader\u003E\r\n  \u003Ch2\u003ESet 4\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="stimulus"\u003E\r\n    ${ parameters.stimulus }\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  Press \u003Ckbd\u003Ej\u003C\u002Fkbd\u003E if the current letter matches the letter \u003Cstrong\u003Ethree\u003C\u002Fstrong\u003E trials before. Otherwise press \u003Ckbd\u003Ek\u003C\u002Fkbd\u003E.\r\n\u003C\u002Ffooter\u003E',
                timeout: "2500",
                correctResponse: "${ parameters.match }",
                parameters: {},
                files: {},
              },
            ],
          },
        },
      ],
    },
    {
      type: "lab.html.Screen",
      responses: {
        "keypress(Space)": "Continue",
      },
      messageHandlers: {},
      title: "End of task",
      content:
        '\u003Cheader\u003E\r\n  \u003Ch2\u003EEnd of task\u003C\u002Fh2\u003E\r\n\u003C\u002Fheader\u003E\r\n\r\n\u003Cmain class="content-vertical-center content-horizontal-center"\u003E\r\n  \u003Cdiv class="w-m"\u003E\r\n    \u003Cp\u003E\u003Cstrong\u003EYou have completed this task. It is designed to be challenging and become increasingly difficult, so it\'s natural to struggle, especially in the later sets. Thank you for your perseverance!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\r\n    \u003Cp\u003EYou\'re welcome to take a brief break if you like, you\'ve earned it!\u003C\u002Fp\u003E\r\n  \u003C\u002Fdiv\u003E\r\n\u003C\u002Fmain\u003E\r\n\r\n\u003Cfooter\u003E\r\n  You may close this window now.\r\n\u003C\u002Ffooter\u003E',
      parameters: {},
      files: {},
    },
  ],
})

// Let's go!
study.run()
